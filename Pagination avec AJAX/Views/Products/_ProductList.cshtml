@model PagedResult<Product>

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var product in Model.Items)
        {
            <tr>
                <td>@product.Name</td>
                <td>@product.Price</td>
            </tr>
        }
    </tbody>
</table>

<!-- Pagination -->
<div class="pagination">
    <!-- Lien vers la première page -->
    @if (Model.PageNumber > 1)
    {
        <a href="#" class="page-link" data-page="1">Début</a>
    }
    else
    {
        <span class="disabled">Début</span>
    }

    <!-- Lien vers la page précédente -->
    @if (Model.PageNumber > 1)
    {
        <a href="#" class="page-link" data-page="@(Model.PageNumber - 1)">Previous</a>
    }
    else
    {
        <span class="disabled">Previous</span>
    }

    <!-- Liens vers les pages numérotées -->
    @for (int i = ViewBag.StartPage; i <= ViewBag.EndPage; i++)
    {
        @if (i == Model.PageNumber)
        {
            <span class="current-page">@i</span> <!-- Page actuelle -->
        }
        else
        {
            <a href="#" class="page-link" data-page="@i">@i</a> <!-- Autres pages -->
        }
    }

    <!-- Lien vers la page suivante -->
    @if (Model.PageNumber < Model.TotalPages)
    {
        <a href="#" class="page-link" data-page="@(Model.PageNumber + 1)">Next</a>
    }
    else
    {
        <span class="disabled">Next</span>
    }

    <!-- Lien vers la dernière page -->
    @if (Model.PageNumber < Model.TotalPages)
    {
        <a href="#" class="page-link" data-page="@(Model.TotalPages)">Fin</a>
    }
    else
    {
        <span class="disabled">Fin</span>
    }
</div>

<!-- Section Scripts pour inclure les scripts spécifiques à cette vue -->
@section Scripts {
    <script>
        $(document).ready(function () {
            // Charger la première page au démarrage
            loadPage(1);

            // Gérer les clics sur les liens de pagination
            $(document).on('click', '.page-link', function (e) {
                e.preventDefault();
                var page = $(this).data('page');
                loadPage(page);
            });

            function loadPage(pageNumber) {
                $.ajax({
                    url: '@Url.Action("GetProducts", "Products")',
                    data: { pageNumber: pageNumber },
                    success: function (data) {
                        $('#product-list').html(data);
                    },
                    error: function () {
                        alert("An error occurred while loading the page.");
                    }
                });
            }
        });
    </script>
}
